/**
 * ||========================================================================================================================||
 * ||                                                                                                                        ||
 * ||  ________  _______   ________  _________  ___  ___  ________  ________  ___  ___  ________  ________  ________         ||
 * || |\   ___ \|\  ___ \ |\   __  \|\___   ___\\  \|\  \|\   __  \|\   __  \|\  \|\  \|\   __  \|\   __  \|\   ___  \       ||
 * ||  \ \  \_|\ \ \   __/|\ \  \|\  \|___ \  \_\ \  \\\  \ \  \|\  \ \  \|\  \ \  \\\  \ \  \|\ /\ \  \|\  \ \  \\ \  \     ||
 * ||   \ \  \ \\ \ \  \_|/_\ \   __  \   \ \  \ \ \   __  \ \   __  \ \   _  _\ \  \\\  \ \   __  \ \   __  \ \  \\ \  \    ||
 * ||    \ \  \_\\ \ \  \_|\ \ \  \ \  \   \ \  \ \ \  \ \  \ \  \ \  \ \  \\  \\ \  \\\  \ \  \|\  \ \  \ \  \ \  \\ \  \   ||
 * ||     \ \_______\ \_______\ \__\ \__\   \ \__\ \ \__\ \__\ \__\ \__\ \__\\ _\\ \_______\ \_______\ \__\ \__\ \__\\ \__\  ||
 * ||      \|_______|\|_______|\|__|\|__|    \|__|  \|__|\|__|\|__|\|__|\|__|\|__|\|_______|\|_______|\|__|\|__|\|__| \|__|  ||
 * ||                                                                                                                        ||
 * ||========================================================================================================================||
 * ||                                                                                                                        ||  
 * ||                                               ★ Please do not modify this code ★                                      ||  
 * ||                                   ► This Mod was created for Minecraft Bedrock Edition ◄                               || 
 * ||                                                                                                                        ||
 * ||========================================================================================================================||
 */

/**
* @made_by Death_Aruban
* @version [1.0.5]
* @link [https://discord.com/invite/NKy9A9RAe8]
*/

(function(_0x540182,_0x485c63){const _0x2bacaa=AruCube_Death_Aruban_0x557a,_0x23bdb2=_0x540182();while(!![]){try{const _0x5ef1cb=-parseInt(_0x2bacaa(0x19c))/0x1*(-parseInt(_0x2bacaa(0x1cc))/0x2)+parseInt(_0x2bacaa(0x1c3))/0x3+parseInt(_0x2bacaa(0x194))/0x4*(parseInt(_0x2bacaa(0x1c7))/0x5)+parseInt(_0x2bacaa(0x178))/0x6*(-parseInt(_0x2bacaa(0x176))/0x7)+-parseInt(_0x2bacaa(0x1c5))/0x8+-parseInt(_0x2bacaa(0x19b))/0x9+-parseInt(_0x2bacaa(0x190))/0xa*(-parseInt(_0x2bacaa(0x1bf))/0xb);if(_0x5ef1cb===_0x485c63)break;else _0x23bdb2['push'](_0x23bdb2['shift']());}catch(_0x435505){_0x23bdb2['push'](_0x23bdb2['shift']());}}}(AruCube_Death_Aruban_0x46aa,0x1f78c));function AruCube_Death_Aruban_0x557a(_0x21f065,_0x4a6305){const _0x46aa35=AruCube_Death_Aruban_0x46aa();return AruCube_Death_Aruban_0x557a=function(_0x557a02,_0x447302){_0x557a02=_0x557a02-0x154;let _0x30d238=_0x46aa35[_0x557a02];return _0x30d238;},AruCube_Death_Aruban_0x557a(_0x21f065,_0x4a6305);}import{ActionFormData,ModalFormData}from'@minecraft/server-ui';import{EnchantmentTypes,ItemEnchantableComponent,ItemStack}from'@minecraft/server';import{getComponent,getScore,getItemCount,translateItemName}from'../function';import{config}from'../../config';function AruCube_Death_Aruban_0x46aa(){const _0xf2c8c4=['some','\x0aSlot:\x20','\x20§8>>\x20§cNo\x20empty\x20slot\x20available\x20for\x20enchanted\x20book.','length','catch','§cRemove\x20from\x0a§bItem:\x20','\x0a§bTotal\x20§aXP\x20§bcost:\x20§6','score_name','map','join','getItem','index','§aSecond\x20Item\x20Icon','name','arucube.enchant.trasfer_second_item','Name:\x20','button','body',':\x20level=','minecraft:enchantable','\x0aEnchant:\x20','Text','no_icon','type','sendMessage','§aConfirm\x20:\x0a§fProceed\x20with\x20transferring\x20the\x20enchantments\x20from\x20the\x20\x0afirst\x20item\x20to\x20the\x20second\x20item.\x20\x0aThe\x20costs\x20are\x20listed\x20above.','\x0a§f---------------------','keys','\x0a§bTotal\x20§6','\x0a§aSlot:§f\x20','\x20§8>>\x20§aOperation\x20canceled.','getComponent','\x20§6','\x0a§dEnchantments:§f\x0a','removeEnchantment','scores','217MWCIro','\x0a§bSecond\x20Item\x20:\x0a\x0a§aName:§f\x20','12438dGZmCM','\x20Invalid\x20selection.','container','\x20§8>>\x20§cNo\x20enchantable\x20items\x20to\x20display!','\x0a§aDescription:§f\x20','\x0a§dEnchantments:§f\x20','enchantments','\x0a§f---------------------\x0a§6If\x20you\x20are\x20sure\x20of\x20your\x20choice,\x20click\x20confirm.\x0a\x0a§cOtherwise,\x20click\x20cancel.','componentId','slice','\x20Source\x20item\x20does\x20not\x20have\x20an\x20enchantable\x20component:\x20','\x20Unknown\x20selection.','level','get','\x20§8>>\x20§cItem\x20has\x20no\x20enchantments.','\x0a§8','formValues','\x20Enchantment\x20data\x20is\x20not\x20valid.','find','size','§f-\x20','forEach','filter','§f§l\x20','20IbqJRE','\x20The\x20item\x20is\x20not\x20enchantable.','item','§6-\x20','260JSKfHR','\x20:\x20§a','§fList\x20of\x20Enchantable\x20Items:§a\x20','\x20Invalid\x20level\x20for\x20enchantment\x20','show','split','title','2183463gzZxVv','37951JnfQeK','push','state','typeId','minecraft:enchanted_book','items','then','addEnchantment','getLore','§b\x20cost:\x20§6','charAt','§bPlayer\x20:\x20§a','setItem','\x0a-\x20','values','minecraft:book','amount','maxLevel','arucube.enchant.transfer','toUpperCase','getEnchantments','error','\x0a§f---------------\x0a§bSecond\x20Item:\x0a\x0a§aName:§f\x20','\x0a§dEnchant:\x0a','None','arucube.enchant.trasfer_second_item_confirm','\x0a§aAdd\x20on\x0a§bItem:\x20',':\x20§a','minecraft:inventory','nameTag','getEnchantment','getAll','object','stack','canceled','517495lOyYEX','Confirm','score_remove','No\x20description','693939WBMpWQ','from','1277976ePFWwi','\x0a§bFirst\x20Item:\x0a\x0a§aName:§f\x20','14940hFkogQ','\x20§8>>\x20§aEnchantments\x20transferred\x20successfully.','slider','display_name','\x20§8>>\x20§cNo\x20compatible\x20enchantments\x20available\x20for\x20transfer.','4aAlUdM','xp_remove','§cCancel\x20:\x0a§fThe\x20transfer\x20of\x20enchantments\x20will\x20be\x20canceled.\x20\x0aNo\x20costs\x20will\x20be\x20incurred.\x0a','\x20§8>>\x20§cFailed\x20to\x20prepare\x20compatible\x20enchantments.'];AruCube_Death_Aruban_0x46aa=function(){return _0xf2c8c4;};return AruCube_Death_Aruban_0x46aa();}import{item_texture_list,remove_resources,see_xp,enchant_incompatible}from'../item_list';export async function prepareEnchantmentTransfer(_0x3b6998,_0x3f1f18,_0x2ff58d){const _0x2d1dce=AruCube_Death_Aruban_0x557a,_0x2da682=getComponent(_0x3f1f18,ItemEnchantableComponent[_0x2d1dce(0x180)]);if(!_0x2da682){_0x3b6998['sendMessage']('Item\x20is\x20not\x20enchantable.');return;}const _0x401d06=_0x2da682[_0x2d1dce(0x1b0)]();if(_0x401d06[_0x2d1dce(0x155)]===0x0){_0x3b6998['sendMessage'](_0x2d1dce(0x186));return;}showItemSelection(_0x3b6998,_0x3f1f18,_0x2ff58d,_0x401d06);}async function showItemSelection(_0xdf5df9,_0x5bed4e,_0x159649,_0x40cba8){const _0x260a9e=AruCube_Death_Aruban_0x557a,_0x1dd9dd=_0xdf5df9[_0x260a9e(0x171)](_0x260a9e(0x1b8))['container'],_0x3253d5=[];for(let _0x1c0e22=0x0;_0x1c0e22<_0x1dd9dd[_0x260a9e(0x18b)];_0x1c0e22++){const _0x2e3af5=_0x1dd9dd[_0x260a9e(0x15c)](_0x1c0e22);if(_0x2e3af5&&_0x1c0e22!==_0x159649){const _0x43c007=getComponent(_0x2e3af5,ItemEnchantableComponent[_0x260a9e(0x180)]);_0x43c007&&_0x3253d5[_0x260a9e(0x19d)]({'item':_0x2e3af5,'index':_0x1c0e22});}}if(_0x3253d5[_0x260a9e(0x155)]===0x0){_0xdf5df9[_0x260a9e(0x16a)](_0x260a9e(0x17b));return;}const _0x3b8372=new ActionFormData();_0x3b8372['title']('arucube.enchant.trasfer_second'),_0x3b8372[_0x260a9e(0x163)](_0x260a9e(0x196)+_0x3253d5['length']+_0x260a9e(0x187));let _0xbde96d='';if(config['scores'][_0x260a9e(0x19e)]){const _0x362590=getScore(_0xdf5df9,config[_0x260a9e(0x175)][_0x260a9e(0x159)]);_0xbde96d+='§b'+config['scores'][_0x260a9e(0x15f)]+_0x260a9e(0x195)+_0x362590+'\x0a';}if(config['items'][_0x260a9e(0x19e)]){const _0x446522=getItemCount(_0xdf5df9[_0x260a9e(0x171)](_0x260a9e(0x1b8))['container'],config[_0x260a9e(0x1a1)]['id']);_0xbde96d+='§b'+config[_0x260a9e(0x1a1)]['name']+_0x260a9e(0x195)+_0x446522+'\x0a';}if(config['xp'][_0x260a9e(0x19e)]){const _0x2c48bd=see_xp(_0xdf5df9);_0xbde96d+='§b'+config['xp'][_0x260a9e(0x15f)]+_0x260a9e(0x195)+_0x2c48bd+'\x0a';}_0xbde96d+=_0x260a9e(0x1a7)+_0xdf5df9[_0x260a9e(0x15f)],_0x3b8372[_0x260a9e(0x162)](''+_0xbde96d);const _0xe0c95e=_0x5bed4e['nameTag']??translateItemName(_0x5bed4e['typeId']),_0x57ac91=_0x5bed4e[_0x260a9e(0x1a4)]()['join']('\x0a')||_0x260a9e(0x1c2),_0x246ca6=_0x159649,_0x1c8b3e=_0x5bed4e[_0x260a9e(0x171)](ItemEnchantableComponent[_0x260a9e(0x180)])?.['getEnchantments']()||[];let _0x2be175=_0x1c8b3e[_0x260a9e(0x155)]>0x0?_0x1c8b3e[_0x260a9e(0x15a)](_0xcf8dc3=>_0x260a9e(0x1a9)+translateEnchantmentName(_0xcf8dc3[_0x260a9e(0x169)]['id'])+_0x260a9e(0x1b7)+_0xcf8dc3[_0x260a9e(0x184)]+'§f')[_0x260a9e(0x15b)](''):'None';const _0x3d718d=getItemIcon(_0x5bed4e);_0x3b8372['button']('\x0a§bFirst\x20Item\x20:\x0a§aName:§f\x20'+_0xe0c95e+_0x260a9e(0x17c)+_0x57ac91+_0x260a9e(0x16f)+_0x246ca6+_0x260a9e(0x17d)+_0x2be175,_0x3d718d);const _0x12fbcb={};let _0x66723a=0x2;for(let _0x4dd920=0x0;_0x4dd920<_0x3253d5[_0x260a9e(0x155)];_0x4dd920++){const {item:_0x52d918,index:_0x31974f}=_0x3253d5[_0x4dd920],_0x4c729c=_0x52d918[_0x260a9e(0x1b9)]??translateItemName(_0x52d918['typeId']),_0x264e6d=getItemIcon(_0x52d918),_0x1c1db9=_0x52d918[_0x260a9e(0x171)](ItemEnchantableComponent[_0x260a9e(0x180)])?.[_0x260a9e(0x1b0)]()['length']||0x0;_0x3b8372['button'](_0x260a9e(0x161)+_0x4c729c+_0x260a9e(0x1d1)+_0x31974f+_0x260a9e(0x166)+_0x1c1db9,_0x264e6d),_0x12fbcb[_0x66723a]=_0x3253d5[_0x4dd920],_0x66723a++;}_0x3b8372['show'](_0xdf5df9)['then'](({selection:_0xc01bf2,canceled:_0x8c52e3})=>{const _0x108bb3=_0x260a9e;if(_0x8c52e3)return;if(_0xc01bf2===0x0)return;if(_0xc01bf2===0x1)return;const _0x3eaeae=_0x12fbcb[_0xc01bf2][_0x108bb3(0x192)];if(!_0x3eaeae){_0xdf5df9[_0x108bb3(0x16a)](_0x108bb3(0x179));return;}showSecondItemSelectionForm(_0xdf5df9,_0x5bed4e,_0x159649,_0x3eaeae,_0x12fbcb[_0xc01bf2][_0x108bb3(0x15d)],_0x40cba8,_0xe0c95e,_0x57ac91,_0x246ca6,_0x2be175,_0x3d718d);})[_0x260a9e(0x156)](_0x35cc91=>{const _0xa2953e=_0x260a9e;console[_0xa2953e(0x1b1)](_0x35cc91,_0x35cc91['stack']);});}async function showSecondItemSelectionForm(_0x52eb1f,_0x1e9cac,_0x26bc2c,_0x470979,_0x23a59e,_0x2aed89,_0x302907,_0x420010,_0x4bffe3,_0x39c725,_0x4476ab){const _0x2031a3=AruCube_Death_Aruban_0x557a,_0x64ac3f=_0x52eb1f[_0x2031a3(0x171)](_0x2031a3(0x1b8))[_0x2031a3(0x17a)],_0x5eeb40=[];for(let _0x4e61db=0x0;_0x4e61db<_0x64ac3f[_0x2031a3(0x18b)];_0x4e61db++){const _0xb60dd2=_0x64ac3f[_0x2031a3(0x15c)](_0x4e61db);if(_0xb60dd2&&_0x4e61db!==_0x26bc2c&&_0x4e61db!==_0x23a59e){const _0x4c806f=getComponent(_0xb60dd2,ItemEnchantableComponent[_0x2031a3(0x180)]);_0x4c806f&&_0x5eeb40[_0x2031a3(0x19d)]({'item':_0xb60dd2,'index':_0x4e61db});}}const _0x4e5f18=new ActionFormData();_0x4e5f18['title'](_0x2031a3(0x160)),_0x4e5f18[_0x2031a3(0x163)](_0x2031a3(0x196)+_0x5eeb40['length']+_0x2031a3(0x187));let _0x4b74d2='';if(config[_0x2031a3(0x175)]['state']){const _0x1290a9=getScore(_0x52eb1f,config[_0x2031a3(0x175)]['score_name']);_0x4b74d2+='§b'+config[_0x2031a3(0x175)][_0x2031a3(0x15f)]+_0x2031a3(0x195)+_0x1290a9+'\x0a';}if(config['items'][_0x2031a3(0x19e)]){const _0x3a9a1e=getItemCount(_0x52eb1f[_0x2031a3(0x171)](_0x2031a3(0x1b8))[_0x2031a3(0x17a)],config[_0x2031a3(0x1a1)]['id']);_0x4b74d2+='§b'+config['items'][_0x2031a3(0x15f)]+_0x2031a3(0x195)+_0x3a9a1e+'\x0a';}if(config['xp'][_0x2031a3(0x19e)]){const _0x25eb8a=see_xp(_0x52eb1f);_0x4b74d2+='§b'+config['xp'][_0x2031a3(0x15f)]+'\x20:\x20§a'+_0x25eb8a+'\x0a';}_0x4b74d2+='§bPlayer\x20:\x20§a'+_0x52eb1f[_0x2031a3(0x15f)],_0x4e5f18[_0x2031a3(0x162)](''+_0x4b74d2);const _0x7a09d7=_0x470979[_0x2031a3(0x1b9)]??translateItemName(_0x470979['typeId']),_0x15cb18=_0x470979[_0x2031a3(0x1a4)]()[_0x2031a3(0x15b)]('\x0a')||_0x2031a3(0x1c2),_0x4fadbf=_0x23a59e,_0x4f2264=_0x470979[_0x2031a3(0x171)](ItemEnchantableComponent[_0x2031a3(0x180)])?.['getEnchantments']()||[];let _0x484145=_0x4f2264[_0x2031a3(0x155)]>0x0?_0x4f2264['map'](_0x8ccaa4=>_0x2031a3(0x1a9)+translateEnchantmentName(_0x8ccaa4[_0x2031a3(0x169)]['id'])+_0x2031a3(0x1b7)+_0x8ccaa4[_0x2031a3(0x184)]+'§f')[_0x2031a3(0x15b)](''):_0x2031a3(0x1b4);const _0x3cad8a=getItemIcon(_0x470979);_0x4e5f18[_0x2031a3(0x162)]('\x0a§bFirst\x20Item\x20:\x0a\x0a§aName:§f\x20'+_0x302907+'\x0a§aDescription:§f\x20'+_0x420010+_0x2031a3(0x16f)+_0x4bffe3+_0x2031a3(0x17d)+_0x39c725+'\x0a§f\x0a---------------\x0a'+(_0x2031a3(0x177)+_0x7a09d7+_0x2031a3(0x17c)+_0x15cb18+_0x2031a3(0x16f)+_0x4fadbf+_0x2031a3(0x17d)+_0x484145),_0x4476ab),_0x4e5f18[_0x2031a3(0x162)](_0x2031a3(0x15e),_0x3cad8a),_0x4e5f18['button'](_0x2031a3(0x1c0));const _0x342158={};let _0x20026b=0x4;for(let _0x67f4f7=0x0;_0x67f4f7<_0x5eeb40[_0x2031a3(0x155)];_0x67f4f7++){const {item:_0x3f025c,index:_0x44c28a}=_0x5eeb40[_0x67f4f7],_0x56d32d=_0x3f025c[_0x2031a3(0x1b9)]??translateItemName(_0x3f025c[_0x2031a3(0x19f)]),_0x53e41f=getItemIcon(_0x3f025c),_0x295c9f=getEnchantmentsFromItem(_0x3f025c)[_0x2031a3(0x155)]||0x0;_0x4e5f18[_0x2031a3(0x162)](_0x2031a3(0x161)+_0x56d32d+_0x2031a3(0x1d1)+_0x44c28a+'\x0aEnchant:\x20'+_0x295c9f,_0x53e41f),_0x342158[_0x20026b]=_0x5eeb40[_0x67f4f7],_0x20026b++;}_0x4e5f18['show'](_0x52eb1f)[_0x2031a3(0x1a2)](({selection:_0x58302c,canceled:_0x229e0a})=>{const _0x5649e6=_0x2031a3;if(_0x229e0a)return;switch(_0x58302c){case 0x0:break;case 0x1:break;case 0x2:break;case 0x3:prepareCompatibleEnchantments(_0x52eb1f,_0x1e9cac,_0x26bc2c,_0x470979,_0x23a59e);break;default:const _0x4e5419=_0x342158[_0x58302c];_0x4e5419?showSecondItemSelectionForm(_0x52eb1f,_0x1e9cac,_0x26bc2c,_0x4e5419[_0x5649e6(0x192)],_0x4e5419['index'],_0x2aed89,_0x302907,_0x420010,_0x4bffe3,_0x39c725,_0x4476ab):_0x52eb1f[_0x5649e6(0x16a)](_0x5649e6(0x179));}})[_0x2031a3(0x156)](_0x465449=>{const _0x312df1=_0x2031a3;console[_0x312df1(0x1b1)](_0x465449,_0x465449['stack']);});}async function showEnchantmentTransferForm(_0x3a0229,_0x3ce4bb,_0x1cecaa,_0x26681f,_0x5c6b85,_0xb3e63f){const _0x18c9e4=AruCube_Death_Aruban_0x557a,_0x1b8f97=new ModalFormData();_0x1b8f97[_0x18c9e4(0x19a)](_0x18c9e4(0x1ae)),_0xb3e63f[_0x18c9e4(0x18d)](_0x20d261=>{const _0x400e2a=_0x18c9e4,_0x44604e=translateEnchantmentName(_0x20d261[_0x400e2a(0x169)]),_0x4ef23b=String(_0x20d261[_0x400e2a(0x169)]),_0x54181d=getComponent(_0x3ce4bb,ItemEnchantableComponent[_0x400e2a(0x180)]);if(!_0x54181d){console[_0x400e2a(0x1b1)](_0x400e2a(0x182)+_0x3ce4bb['typeId']);return;}let _0x151052=_0x54181d[_0x400e2a(0x1ba)](EnchantmentTypes[_0x400e2a(0x185)](_0x4ef23b));const _0x6eeaae=_0x151052?_0x151052[_0x400e2a(0x184)]:0x0;if(isNaN(_0x6eeaae)){console[_0x400e2a(0x1b1)](_0x400e2a(0x197)+_0x4ef23b+_0x400e2a(0x164)+_0x6eeaae);return;}_0x1b8f97[_0x400e2a(0x1c9)](_0x400e2a(0x18f)+_0x44604e+_0x400e2a(0x172),0x0,_0x6eeaae,0x1,_0x6eeaae);}),_0x1b8f97[_0x18c9e4(0x198)](_0x3a0229)[_0x18c9e4(0x1a2)](_0x238723=>{const _0x18eec4=_0x18c9e4;if(_0x238723[_0x18eec4(0x1be)])return;let _0x758fe={};_0xb3e63f[_0x18eec4(0x18d)]((_0x4b3fc1,_0x4e711b)=>{const _0x348346=_0x18eec4,_0x5415f6=_0x238723[_0x348346(0x188)][_0x4e711b],_0x3f8a6a=_0x4b3fc1[_0x348346(0x184)];_0x5415f6<_0x3f8a6a&&(_0x758fe[_0x4b3fc1[_0x348346(0x169)]]=_0x3f8a6a-_0x5415f6);});if(Object[_0x18eec4(0x16d)](_0x758fe)[_0x18eec4(0x155)]===0x0){_0x3a0229['sendMessage']('\x20§8>>\x20§cNo\x20enchantments\x20selected\x20for\x20transfer.');return;}confirmEnchantmentTransfer(_0x3a0229,_0x3ce4bb,_0x1cecaa,_0x26681f,_0x5c6b85,_0x758fe);})[_0x18c9e4(0x156)](_0x571fa5=>{const _0x23e29b=_0x18c9e4;console[_0x23e29b(0x1b1)](_0x571fa5,_0x571fa5[_0x23e29b(0x1bd)]);});}async function confirmEnchantmentTransfer(_0x8d614c,_0x38fdae,_0x2f1d8f,_0x211c5d,_0x151d23,_0x466582){const _0x42f41d=AruCube_Death_Aruban_0x557a;try{const _0x53bc1c=_0x8d614c['getComponent']('minecraft:inventory')['container'],_0x3d2e98=new ActionFormData();_0x3d2e98[_0x42f41d(0x19a)](_0x42f41d(0x1b5));let _0x1c8150=_0x42f41d(0x157)+(_0x38fdae[_0x42f41d(0x1b9)]??translateItemName(_0x38fdae[_0x42f41d(0x19f)]))+_0x42f41d(0x1b3);Object[_0x42f41d(0x16d)](_0x466582)[_0x42f41d(0x18d)](_0x273812=>{const _0x964ca9=translateEnchantmentName(_0x273812),_0x254361=_0x466582[_0x273812];_0x1c8150+='§6-\x20'+_0x964ca9+'\x20-'+_0x254361+'\x0a';}),_0x1c8150+=_0x42f41d(0x1b6)+(_0x211c5d[_0x42f41d(0x1b9)]??translateItemName(_0x211c5d['typeId']))+'\x0a§dEnchant:\x0a',Object[_0x42f41d(0x16d)](_0x466582)[_0x42f41d(0x18d)](_0x8a43b2=>{const _0x2beb16=_0x42f41d,_0x296f57=translateEnchantmentName(_0x8a43b2),_0x53bd76=_0x466582[_0x8a43b2];_0x1c8150+=_0x2beb16(0x193)+_0x296f57+'\x20+'+_0x53bd76+'\x0a';});let _0xce92de=0x0,_0x5d90b3=0x0;const _0x59e8e2=config[_0x42f41d(0x1a1)]['amount'];Object[_0x42f41d(0x16d)](_0x466582)[_0x42f41d(0x18d)](_0x1fc947=>{const _0x139ceb=_0x42f41d,_0x711b66=_0x466582[_0x1fc947];config['xp']['state']&&(_0xce92de+=_0x711b66*config['xp'][_0x139ceb(0x1cd)]),config[_0x139ceb(0x175)][_0x139ceb(0x19e)]&&(_0x5d90b3+=_0x711b66*config[_0x139ceb(0x175)][_0x139ceb(0x1c1)]);}),_0x1c8150+=_0x42f41d(0x16c);config['xp'][_0x42f41d(0x19e)]&&(_0x1c8150+=_0x42f41d(0x158)+_0xce92de);config[_0x42f41d(0x175)][_0x42f41d(0x19e)]&&(_0x1c8150+=_0x42f41d(0x16e)+config[_0x42f41d(0x175)][_0x42f41d(0x1ca)]+_0x42f41d(0x1a5)+_0x5d90b3);config[_0x42f41d(0x1a1)]['state']&&(_0x1c8150+='\x0a§bItem\x20§a'+config[_0x42f41d(0x1a1)][_0x42f41d(0x15f)]+'\x20§bcost:\x20§6'+_0x59e8e2);_0x1c8150+=_0x42f41d(0x17f),_0x3d2e98[_0x42f41d(0x163)](_0x1c8150);let _0x2e9d48='';if(config[_0x42f41d(0x175)]['state']){const _0x3cb572=getScore(_0x8d614c,config[_0x42f41d(0x175)][_0x42f41d(0x159)]);_0x2e9d48+='§b'+config[_0x42f41d(0x175)][_0x42f41d(0x15f)]+'\x20:\x20§a'+_0x3cb572+'\x0a';}if(config['items']['state']){const _0x551d7f=getItemCount(_0x53bc1c,config[_0x42f41d(0x1a1)]['id']);_0x2e9d48+='§b'+config[_0x42f41d(0x1a1)]['name']+_0x42f41d(0x195)+_0x551d7f+'\x0a';}if(config['xp'][_0x42f41d(0x19e)]){const _0x307aea=see_xp(_0x8d614c);_0x2e9d48+='§b'+config['xp'][_0x42f41d(0x15f)]+_0x42f41d(0x195)+_0x307aea+'\x0a';}_0x2e9d48+='§bPlayer\x20:\x20§a'+_0x8d614c[_0x42f41d(0x15f)],_0x3d2e98[_0x42f41d(0x162)](''+_0x2e9d48);const _0x33a7c4=_0x38fdae[_0x42f41d(0x1b9)]??translateItemName(_0x38fdae[_0x42f41d(0x19f)]),_0x2e522e=_0x38fdae['getLore']()[_0x42f41d(0x15b)]('\x0a')||_0x42f41d(0x1c2),_0x18ce9d=getEnchantmentsFromItem(_0x38fdae)[_0x42f41d(0x15a)](_0x35a378=>_0x42f41d(0x18c)+translateEnchantmentName(_0x35a378[_0x42f41d(0x169)]['id'])+_0x42f41d(0x1b7)+_0x35a378[_0x42f41d(0x184)])[_0x42f41d(0x15b)]('\x0a')||_0x42f41d(0x1b4),_0x3f1b4a=_0x211c5d['nameTag']??translateItemName(_0x211c5d[_0x42f41d(0x19f)]),_0x4e1647=_0x211c5d['getLore']()[_0x42f41d(0x15b)]('\x0a')||_0x42f41d(0x1c2),_0x666e58=getEnchantmentsFromItem(_0x211c5d)[_0x42f41d(0x15a)](_0x380bd9=>_0x42f41d(0x18c)+translateEnchantmentName(_0x380bd9[_0x42f41d(0x169)]['id'])+_0x42f41d(0x1b7)+_0x380bd9[_0x42f41d(0x184)])['join']('\x0a')||_0x42f41d(0x1b4),_0x8fb335=_0x42f41d(0x1c6)+_0x33a7c4+_0x42f41d(0x17c)+_0x2e522e+'\x0a§aSlot:§f\x20'+_0x2f1d8f+_0x42f41d(0x173)+_0x18ce9d+_0x42f41d(0x1b2)+_0x3f1b4a+_0x42f41d(0x17c)+_0x4e1647+_0x42f41d(0x16f)+_0x151d23+_0x42f41d(0x173)+_0x666e58+'\x0a§f---------------';_0x3d2e98['button'](_0x8fb335,getItemIcon(_0x38fdae)),_0x3d2e98[_0x42f41d(0x162)](_0x42f41d(0x167),getItemIcon(_0x211c5d)),_0x3d2e98[_0x42f41d(0x162)](_0x42f41d(0x16b)),_0x3d2e98['button'](_0x42f41d(0x1ce));const {selection:_0x274617,canceled:_0x3c3c02}=await _0x3d2e98['show'](_0x8d614c);if(_0x3c3c02){_0x8d614c[_0x42f41d(0x16a)](_0x42f41d(0x170));return;}switch(_0x274617){case 0x0:break;case 0x1:break;case 0x2:break;case 0x3:transferEnchantments(_0x8d614c,_0x38fdae,_0x2f1d8f,_0x211c5d,_0x151d23,_0x466582,_0xce92de,_0x5d90b3,_0x59e8e2);break;case 0x4:_0x8d614c['sendMessage'](_0x42f41d(0x170));break;default:_0x8d614c['sendMessage'](_0x42f41d(0x183));}}catch(_0x53163c){console[_0x42f41d(0x1b1)](_0x53163c,_0x53163c[_0x42f41d(0x1bd)]);}}function transferEnchantments(_0x4415b2,_0x5b573b,_0x230ef2,_0x8c9a9d,_0x392f0d,_0x413210,_0x2e032d,_0x13c17d,_0x554864){const _0x1b3500=AruCube_Death_Aruban_0x557a;try{const _0x4f5085=_0x4415b2[_0x1b3500(0x171)](_0x1b3500(0x1b8))[_0x1b3500(0x17a)],_0x32fd18=_0x5b573b[_0x1b3500(0x171)](_0x1b3500(0x165)),_0x36d018=_0x8c9a9d[_0x1b3500(0x171)](_0x1b3500(0x165));let _0x3bb130=![];for(const _0x1abbf7 in _0x413210){const _0x55c02d=parseInt(_0x413210[_0x1abbf7],0xa),_0x51821e=EnchantmentTypes[_0x1b3500(0x185)](_0x1abbf7),_0x385140=_0x36d018[_0x1b3500(0x1ba)](_0x51821e),_0x4c4162=(_0x385140?_0x385140['level']:0x0)+_0x55c02d;if(_0x4c4162>_0x51821e[_0x1b3500(0x1ad)]){_0x3bb130=!![];break;}}if(_0x3bb130){_0x4415b2['sendMessage']('\x20§8>>\x20§cEnchantment\x20level\x20exceeds\x20maximum\x20allowed\x20for\x20the\x20item.');return;}if(!remove_resources(_0x4415b2,_0x2e032d,_0x13c17d,_0x554864)){_0x4415b2[_0x1b3500(0x16a)]('\x20§8>>\x20§cFailed\x20to\x20transfer\x20enchantments\x20due\x20to\x20insufficient\x20resources.');return;}for(const _0x27c346 in _0x413210){const _0x34275e=parseInt(_0x413210[_0x27c346],0xa),_0x52fb87=EnchantmentTypes[_0x1b3500(0x185)](_0x27c346);let _0x3df291=_0x32fd18['getEnchantment'](_0x52fb87);if(_0x3df291){const _0x1341f7=_0x3df291[_0x1b3500(0x184)]-_0x34275e;_0x32fd18[_0x1b3500(0x174)](_0x52fb87),_0x1341f7>0x0&&_0x32fd18[_0x1b3500(0x1a3)]({'type':_0x52fb87,'level':_0x1341f7});}}_0x5b573b['typeId']==='minecraft:enchanted_book'&&_0x32fd18[_0x1b3500(0x1b0)]()[_0x1b3500(0x155)]===0x0?handleEmptyEnchantedBook(_0x4f5085,_0x5b573b,_0x230ef2):_0x4f5085[_0x1b3500(0x1a8)](_0x230ef2,_0x5b573b);if(_0x8c9a9d['typeId']==='minecraft:book'){const _0x88411f=handleBookToEnchantedBook(_0x4f5085,_0x8c9a9d,_0x392f0d,_0x413210);if(_0x88411f!==-0x1){const _0x4bfecb=createEnchantedBook(_0x413210);_0x4f5085[_0x1b3500(0x1a8)](_0x88411f,_0x4bfecb);}}else _0x8c9a9d[_0x1b3500(0x19f)]===_0x1b3500(0x1a0)?(addEnchantmentsToItem(_0x36d018,_0x413210),_0x4f5085['setItem'](_0x392f0d,_0x8c9a9d)):(addEnchantmentsToItem(_0x36d018,_0x413210),_0x4f5085[_0x1b3500(0x1a8)](_0x392f0d,_0x8c9a9d));_0x4415b2[_0x1b3500(0x16a)](_0x1b3500(0x1c8));}catch(_0x16cf5a){console[_0x1b3500(0x1b1)](_0x16cf5a,_0x16cf5a[_0x1b3500(0x1bd)]),_0x4415b2[_0x1b3500(0x16a)]('\x20§8>>\x20§cFailed\x20to\x20transfer\x20enchantments.');}}function handleEmptyEnchantedBook(_0x15a125,_0x3a1991,_0x1c6180){const _0x1f5d11=AruCube_Death_Aruban_0x557a;let _0x2507dc=findItemSlot(_0x15a125,'minecraft:book',0x40);if(_0x2507dc===-0x1){if(_0x3a1991[_0x1f5d11(0x1ac)]>0x1){const _0x4d1c8f=findEmptySlot(_0x15a125);_0x4d1c8f!==-0x1?(_0x3a1991['amount']-=0x1,_0x15a125[_0x1f5d11(0x1a8)](_0x1c6180,_0x3a1991),_0x15a125['setItem'](_0x4d1c8f,new ItemStack('minecraft:book',0x1))):_0x15a125[_0x1f5d11(0x1a8)](_0x1c6180,new ItemStack(_0x1f5d11(0x1ab),0x1));}else _0x15a125[_0x1f5d11(0x1a8)](_0x1c6180,new ItemStack(_0x1f5d11(0x1ab),0x1));}else{let _0x1c7d3f=_0x15a125[_0x1f5d11(0x15c)](_0x2507dc);_0x1c7d3f[_0x1f5d11(0x1ac)]+=0x1,_0x15a125[_0x1f5d11(0x1a8)](_0x2507dc,_0x1c7d3f),_0x3a1991['amount']>0x1?(_0x3a1991[_0x1f5d11(0x1ac)]-=0x1,_0x15a125[_0x1f5d11(0x1a8)](_0x1c6180,_0x3a1991)):_0x15a125['setItem'](_0x1c6180,null);}}function handleBookToEnchantedBook(_0x3d5ce2,_0x494fbc,_0x3ad6fa,_0x2e285b){const _0x34b28e=AruCube_Death_Aruban_0x557a;if(_0x494fbc[_0x34b28e(0x1ac)]>0x1){_0x494fbc[_0x34b28e(0x1ac)]-=0x1,_0x3d5ce2[_0x34b28e(0x1a8)](_0x3ad6fa,_0x494fbc);const _0x42e69a=findEmptySlot(_0x3d5ce2);return _0x42e69a!==-0x1?_0x42e69a:(player[_0x34b28e(0x16a)](_0x34b28e(0x154)),-0x1);}else return _0x3ad6fa;}function addEnchantmentsToItem(_0x5777a7,_0x540100){const _0x2e6d78=AruCube_Death_Aruban_0x557a;for(const _0x8d08a6 in _0x540100){const _0x137267=EnchantmentTypes['get'](_0x8d08a6);_0x5777a7[_0x2e6d78(0x1a3)]({'type':_0x137267,'level':_0x540100[_0x8d08a6]});}}function findEmptySlot(_0x1def8a){const _0x1b667a=AruCube_Death_Aruban_0x557a;for(let _0x5e9766=0x0;_0x5e9766<_0x1def8a[_0x1b667a(0x18b)];_0x5e9766++){if(!_0x1def8a[_0x1b667a(0x15c)](_0x5e9766))return _0x5e9766;}return-0x1;}function findItemSlot(_0x3008b0,_0xd22a76,_0x53e044){const _0x22ac8d=AruCube_Death_Aruban_0x557a;for(let _0x28407b=0x0;_0x28407b<_0x3008b0[_0x22ac8d(0x18b)];_0x28407b++){const _0x52678d=_0x3008b0[_0x22ac8d(0x15c)](_0x28407b);if(_0x52678d&&_0x52678d['typeId']===_0xd22a76&&_0x52678d['amount']<_0x53e044)return _0x28407b;}return-0x1;}function createEnchantedBook(_0x261552){const _0x1abcc9=AruCube_Death_Aruban_0x557a,_0x3284f6=new ItemStack(_0x1abcc9(0x1a0),0x1),_0x26c7e5=_0x3284f6[_0x1abcc9(0x171)]('minecraft:enchantable');if(_0x26c7e5)for(let _0x4a6696 in _0x261552){_0x26c7e5[_0x1abcc9(0x1a3)]({'type':EnchantmentTypes[_0x1abcc9(0x185)](_0x4a6696),'level':_0x261552[_0x4a6696]});}return _0x3284f6;}function translateEnchantmentName(_0x2d333e){const _0x3b2d17=AruCube_Death_Aruban_0x557a;return _0x2d333e[_0x3b2d17(0x199)]('_')[_0x3b2d17(0x15a)](_0x438611=>_0x438611[_0x3b2d17(0x1a6)](0x0)[_0x3b2d17(0x1af)]()+_0x438611[_0x3b2d17(0x181)](0x1))[_0x3b2d17(0x15b)]('\x20');}function getItemIcon(_0x4cd509){const _0x20fec8=AruCube_Death_Aruban_0x557a,_0x58af3a=_0x4cd509[_0x20fec8(0x19f)],_0x443690=item_texture_list['vanilla_icon'][_0x58af3a];return _0x443690||item_texture_list['unknown_icon'][_0x20fec8(0x168)];}function getApplicableEnchantments(_0x114d48){const _0x11afc9=AruCube_Death_Aruban_0x557a,_0x15bcca=new ItemStack(_0x114d48),_0x95a57a=getComponent(_0x15bcca,_0x11afc9(0x165));if(!_0x95a57a)return[];return EnchantmentTypes[_0x11afc9(0x1bb)]()[_0x11afc9(0x18e)](_0x46b7f1=>_0x95a57a['canAddEnchantment']({'type':_0x46b7f1,'level':0x1}))['map'](_0x2c0b8c=>({'name':_0x2c0b8c['id'],'maxLevel':_0x2c0b8c[_0x11afc9(0x1ad)]}));}function getBaseEnchantmentList(_0x271077,_0x51a61a){const _0x2d31f5=AruCube_Death_Aruban_0x557a,_0x5bdfd4=getApplicableEnchantments(_0x271077[_0x2d31f5(0x169)]),_0x381191=getApplicableEnchantments(_0x51a61a[_0x2d31f5(0x169)]),_0x32ff7f=_0x5bdfd4[_0x2d31f5(0x18e)](_0x409d0c=>_0x381191[_0x2d31f5(0x1d0)](_0x594764=>_0x594764[_0x2d31f5(0x15f)]===_0x409d0c['name']));return _0x32ff7f;}function filterEnchantments(_0x5058f6,_0x1857f5,_0x36b0be){const _0x3d636b=AruCube_Death_Aruban_0x557a;return _0x5058f6[_0x3d636b(0x18e)](_0xbb359c=>_0x1857f5[_0x3d636b(0x1d0)](_0x260c12=>_0x260c12['name']===_0xbb359c['type']['id'])&&(!_0x36b0be||_0xbb359c['level']<_0x1857f5[_0x3d636b(0x18a)](_0x527d45=>_0x527d45[_0x3d636b(0x15f)]===_0xbb359c[_0x3d636b(0x169)]['id'])[_0x3d636b(0x1ad)]));}function mergeEnchantments(_0x11a838,_0x3b410a){const _0x4fc1f4=AruCube_Death_Aruban_0x557a,_0x38bce1=getBaseEnchantmentList(_0x11a838,_0x3b410a),_0x357089=getEnchantmentsFromItem(_0x11a838),_0x4a1495=filterEnchantments(_0x357089,_0x38bce1,![]),_0x14bade=new Map();return _0x4a1495['forEach'](_0x2fb807=>{const _0x5b5a5b=AruCube_Death_Aruban_0x557a;_0x14bade['set'](_0x2fb807[_0x5b5a5b(0x169)]['id'],{'type':_0x2fb807[_0x5b5a5b(0x169)]['id'],'level':_0x2fb807['level'],'maxLevel':_0x2fb807['type'][_0x5b5a5b(0x1ad)]});}),Array[_0x4fc1f4(0x1c4)](_0x14bade[_0x4fc1f4(0x1aa)]());}function generateDefinitiveEnchantmentList(_0x165569,_0x361e9f){const _0x5f28b2=AruCube_Death_Aruban_0x557a,_0x29e224=mergeEnchantments(_0x165569,_0x361e9f),_0x4fd7b8=getBaseEnchantmentList(_0x165569,_0x361e9f),_0x393ae5=_0x29e224[_0x5f28b2(0x18e)](_0x897a9f=>_0x4fd7b8[_0x5f28b2(0x1d0)](_0x31b415=>_0x31b415[_0x5f28b2(0x15f)]===_0x897a9f[_0x5f28b2(0x169)]));return _0x393ae5;}async function prepareCompatibleEnchantments(_0x4ab0f5,_0x51dbd6,_0x191275,_0x24fc82,_0x5a4f93){const _0x47316f=AruCube_Death_Aruban_0x557a;try{const _0x1fd808=generateDefinitiveEnchantmentList(_0x51dbd6,_0x24fc82);if(_0x1fd808[_0x47316f(0x155)]===0x0){_0x4ab0f5[_0x47316f(0x16a)](_0x47316f(0x1cb));return;}showEnchantmentTransferForm(_0x4ab0f5,_0x51dbd6,_0x191275,_0x24fc82,_0x5a4f93,_0x1fd808);}catch(_0x14af95){console[_0x47316f(0x1b1)](_0x14af95,_0x14af95[_0x47316f(0x1bd)]),_0x4ab0f5[_0x47316f(0x16a)](_0x47316f(0x1cf));}}function getEnchantmentsFromItem(_0x21f030){const _0x5a9ad4=AruCube_Death_Aruban_0x557a,_0x57edf2=_0x21f030['getComponent'](ItemEnchantableComponent[_0x5a9ad4(0x180)]);if(!_0x57edf2)throw new Error(_0x5a9ad4(0x191));const _0x1a04b4=_0x57edf2[_0x5a9ad4(0x17e)]||_0x57edf2[_0x5a9ad4(0x1b0)]();if(!_0x1a04b4||typeof _0x1a04b4!==_0x5a9ad4(0x1bc))throw new Error(_0x5a9ad4(0x189));return _0x1a04b4;}function filterIncompatibleEnchantments(_0x403c4a,_0x5842e0){const _0x5beb5c=AruCube_Death_Aruban_0x557a;return _0x403c4a[_0x5beb5c(0x18e)](_0xb7bd3=>_0x5842e0['every'](_0x49fe59=>!enchant_incompatible[_0xb7bd3[_0x5beb5c(0x169)]['id']]||!enchant_incompatible[_0xb7bd3[_0x5beb5c(0x169)]['id']]['includes'](_0x49fe59['type']['id'])));}